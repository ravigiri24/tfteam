<ion-header>
  <ion-toolbar>
    <ion-title>Add Material</ion-title>

    <ion-buttons slot="end">
      <ion-icon class="button-right-margin theme-color" (click)="openCrudManagement('CATEGOEY_OF_MATERIAL')" name="add-circle-outline"></ion-icon>
      <ion-icon class="button-right-margin theme-color" (click)="openCrudManagement('MATERIAL_OF_REPAIRING')" name="add-circle-outline"></ion-icon>

      <ion-icon
        class="theme-color icon-size"
        (click)="dismiss()"
        name="close-circle-outline"
      ></ion-icon>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content >

  
    
    <!-- <ion-item  *ngIf="expense_head!='PREDICTION'" class="bottom-margin">
      <ion-icon (click)="openCrudManagement('REPAIRINGCENTER')" name="add-circle-outline"></ion-icon>
      <ion-icon (click)="getRepairingCenterList(true)" name="refresh-outline"></ion-icon>
      <ion-select  formControlName="repairing_center"    label="Repairing Center" label-placement="type">
        <ion-select-option *ngFor="let rep of repairingCenterList" [value]="rep.id">    {{ rep?.name }}</ion-select-option>
    
      </ion-select>
    </ion-item> -->
    <!-- <div class="global_input_block">
      <ion-input  (ionFocus)="onInputFocus()"   label="TF Code *" fill="outline" labelPlacement="stacked" type="text" formControlName="tfCode"></ion-input>
    </div> -->
  
    <ion-searchbar  (ionFocus)="onInputFocus()"  (ionBlur)="focusOut()"  [(ngModel)]="search.name" slot="fixed" placeholder="Search Spare"></ion-searchbar>
    <ion-label class="label-position hieght-body" *ngIf="selectedItem?.name">
      <span  class="inner-heading">Selected Spare-{{selectedItem?.name}}</span>
      </ion-label>
      <div *ngIf="selectedItem?.name && !selectedItem?.id"  class="global_input_block category-position ">
        <ion-select (ionChange)="setSpareCategory()" [(ngModel)]="category" fill="outline" label="Select Category*" label-placement="type">
          <ion-select-option *ngFor="let spare of spareList" [value]="spare?.id">{{spare?.name}}</ion-select-option>
        </ion-select>
      </div>
    <!-- <div class="global_input_block top-position-search">
      <ion-input  label="Search Service" fill="outline" (ionFocus)="onInputFocus()"  (ionBlur)="focusOut()"  [(ngModel)]="search.name"  labelPlacement="stacked" ></ion-input>
    </div> -->
    <div  [ngClass]="{'searchList':showSearchList==true}"   >
      <ion-content>
      <ion-list *ngIf="showSearchList" class="list_row" >
        <ion-item (click)="setValue(expense)" *ngFor="let expense of materialList| filterBy: search ;let in=index">
          <ion-label>
            <h2 class="theme-color">{{expense?.name}}</h2>
          
          </ion-label>
          </ion-item>
        </ion-list>
        <div class="text-align" *ngIf="(materialList | filterBy: search).length === 0">
          <div class="row">
          <span style="color: red;" >No Spare Found</span>
        </div>
      
          <ion-button  (click)="addNewService()"  style="text-align: center;"  ><span class="color-white">Add New</span></ion-button>
        </div>
       

      </ion-content>
      </div>

      <form class="top-position hieght-body" [formGroup]="form">
        <div class="global_input_block">
          <ion-input  label="Amount" fill="outline" labelPlacement="stacked" type="number" formControlName="expense_amount"></ion-input>
        </div>
        <div class="global_input_block">
          <ion-input  label="Quantity" fill="outline" labelPlacement="stacked" type="number" formControlName="qty"></ion-input>
        </div>
        
    <div class="login-button ">

      <ion-button *ngIf="!editData"   (click)="saveData()"  style="text-align: center;" expand="block" ><span class="color-white">Add</span></ion-button>
      <ion-button  *ngIf="editData"  (click)="updateData()"  style="text-align: center;" expand="block" ><span class="color-white">Update</span></ion-button>
    
    </div> 
      </form>
  
 
</ion-content>
